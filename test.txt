None \n Number of pages: <bound method PdfFileReader.getNumPages of <PyPDF2.pdf.PdfFileReader object at 0x7f47519438d0>> \n\nGOVERNMENT
ENGINEERINGCOLLEGE
THRISSUR
2019
CS451-B.TECHSEMINARREPORT
ON
TeamCompositioninPES2018Using
SubmodularFunctionOptimization
Presentedby
VROHITH
TCR16CS059
DEPARTMENTOFCSE
CS451Seminar,2019
ABSTRACT
Withthedevelopmentofcomputergametechnologies,weknowthatgameplay
becomesveryrealisticinmanysportsgames,thereforeprovidingappealing
playexperiencetogameplayers.Togetthevictoryinafootballpitch,team
compositionisoneofthemostimportantthingneeded.Thereislittleresearch
ontheautomaticteamcompositioninsportsgamesparticularlyinapopular
gameofProEvolutionSoccer(PES).Soweconsidertheteamcompositionas
oneteamplayerrecommendationproblem.Wealsoknowthatapaticularteam
iscomposedofseveralplayersinagame.Subsequently,weaimtorecommend
alistoftlygoodfootballplayerstogameplayers.
Wewillconverttheteamplayerrecommendationintooneoptimization
problemandproducegreedyalgorithm-basedsolutions.Wedealwithacov-
eragefunctionthatquanthedegreeofsoccerskillstobecoveredbyeach
selectedplayers.Alsoweimprovethegreedyalgorithmtosolvethefunction
optimizationproblem.
Dept.ofCSE,GEC,Thrissur
i
CS451Seminar,2019
ACKNOWLEDGEMENT
Itgivesmegreatpleasuretopresentmyseminarreporton"TeamComposition
inPES2018UsingSubmodularFunctionOptimization".Nowork,howeverbig
orsmall,haseverbeendonewithoutthecontributionofothers.Sothesewords
ofacknowledgementcomeasasmallgestureofgratitudetowardsallthose
people,withoutwhomthesuccessfulcompletionofthisreportwouldnothave
beenpossible.
IwouldliketoexpressmygratitudetowardsseminarcoordinatorsProf.He-
lenKJ,AssociateProfessorandProf.GeorgeMathew,AssistantProfessor,
DepartmentofComputerScienceandEngineeringwhogavemetheirvaluable
suggestions,reviews,motivationanddirection.
Iwouldalsoliketothankalllabforprovidingwiththenecessaryfacil-
itiesforthepresentation,itwouldhavebeenimpossibletocompleteseminar
withouttheirpromptcooperation.LastbutnottheleastIwouldliketothank
allmyfriends,whosupportedmewiththeirvaluablecriticism,adviceand
support.
Dept.ofCSE,GEC,Thrissur
ii
CS451Seminar,2019
Contents
ListofFiguresiv
1Introduction.............................1
1.1ProEvolutionSoccer....................1
1.2SubmodularFunction....................2
2RelatedWork............................2
3PlayerRecommendationAsASubmodularFunctionOptimization3
3.1Functionforskillcoverage.................3
3.2Recommendermodel....................4
4AlgorithmsForOptimization...................4
4.1Generalizedgreedyalgorithm...............5
4.2Limitgreedyalgorithm...................5
4.3Costeforwardselectionalgorithm.........6
5ExperimentsAndRealGameResults...............7
5.1Analysisofdata.......................7
5.2ExperimentalResults....................8
6Conclusion..............................10
Dept.ofCSE,GEC,Thrissur
iii
CS451Seminar,2019
ListofFigures
1PlayerattributesinPES2018...................2
2Playerattributesandpossiblevaluesfortheattributes.....3
3FunctionofTcoveringSasF(T.............4
4Proofforsubmodular........................4
5GeneralizedGreedyAlgorithm...................5
6LimitGreedyAlgorithm......................5
7CEFGAlgorithm..........................6
8Positionsofplayersandtheirequivalentnumbers........7
9Costofplayersasafunctionoftheirratings...........8
10DreamteamvsRandomteam...................8
11MatchresultsofCEFGvsactualteams..............9
12NormalizedresultsoftheCEFGv.s.theactualteams......9
Dept.ofCSE,GEC,Thrissur
iv
CS451Seminar,2019
ListofAbbreviations
PESProEvolutionSoccer
PS4PlayStation4
CEFGCosteForwardselectionGreedy
MABManBlue
MSBMercysideBlue
HERHampshirERed
Dept.ofCSE,GEC,Thrissur
v
1.INTRODUCTION
CS451Seminar,2019
1Introduction
1.1ProEvolutionSoccer
Inthismodernworld,manysportgameshaveappearedandattractedmore
andmoreplayersingamemarkets.ProEvo-lutionSoccer2018(PES2018)is
oneofthepopularfootballgameproducedandreleasedbyKonami.Itcanbe
playedonapersonalcomputer,PS4orXBOXandinMobiles.Thisgamecan
becontrolledbyhumanorcomputerplayers,andcanfullysimulateafoot-
ballmatch.Itgivesthehumanplayeranopportunitytocomposeateamof
avatarseachofwhichsim-ulatesareal-worldfootballplayer,e.g.LionelMessi,
CristianoRonaldo,EdenHazardetc.,inacompetitivegame.Soasusualthe
selectionofteammembersbecomesmoreinterestingandimportantinPES..
Weallseefootballanditistheworldsgame,itgetsinagamelike
PES.Theteamcompositiondependsonpreferencesandknowledgeofahuman-
playerwho,however,stillexpectsinputsfromthegamingsystem.We,thehu-
manplayers,willbeifwegetateamthatwearedreamingofadgets
thefavoriteplayerstoourteam.Thisiswellalignedwithentertainmentspirit
inthecontentrecommendationincomputergames.Henceateamrecommender
becomesanimportantfeatureinasportgamenotjustlimitedinPES
InPES,everyfootballplayerisspbyasetofattributes

AttackingProwess

BallControl

Speed

Jumpetc...
Eachattributeisassociatedwithaspvalueallofwhichdecidethe
playerperformanceinamatch.Thestrengthofateamismainlyby
theperformanceofindividualplayers.Theteamismorelikelytowinamatch
ifmoreskillfulplayersareselectedintotheteam.However,aseachplayerhas
asppositionandalimitednumberofpositions(afootballmatchneeds11
players)existinapitch,theteamcompositionisnotstraightforwardgiventhe
knownratingsoftheplayersthatindicatetheirperformance.Thingsbecome
morecomplicatedsinceahuman-playerisoftengivenalimitedbudgetfor
purchasingateamofplayerseachofwhichcostsacertainvaluecorresponding
tohisskills.Itisverymuch,ifweevencomparewiththevarious
fantasyleaguesforvarioussports.Acostwillbegivenearlierandweneed
togetouridealanoptimizedteamwithinthatcostlimit.Ithavetobedone
allmanuallyandneedtoobserveallthegamestoselectateamforthenext
gameweekanditsallbasedonhumansknowledgeaboutvariousplayers,their
playingstylesandpositions.Asanexample,wecantakethefantasyleaguesto
knowmoreabouttheteamcomposition.
DepartmentofCSE,GEC,Thrissur
1
2.RELATEDWORK
CS451Seminar,2019
Figure1:PlayerattributesinPES2018
1.2SubmodularFunction
Afunctionissubmodularifitcompliesthefollowingproperty:whenyouadd
asettoasolution"A"theimprovementisworstthanaddingthesamesetto
asubsetof"A".Submodularityisadiscreteversionofconcavity.
Anexampleisthesetcoverproblem.Youhaveasetofsetsandyouhaveto
theminimumcombinationofthosesetstocoversomeuniverseofelements.
Forexamplelettheuniversebe:U=1,2,3,4,5,6,7,8andoursets:S1=1,2,3
S2=1,4,5,6S3=4,5,7S4=2,4,6,8S5=6,8S6=1,3,5,7
ThesolutionisofcourseS4S6.
Soinmoremathematicalway,ForasetofobjectsV=v1,...,vn
andafunctionf:2VR,ifforeachABVandeVB,itholdsthatM(e
pA)greaterthanequaltoM(epB),thenthefunctionfissubmodular,where
(e1A)=f(AUe)-f(A)
Oneimportantpropertyofsubmodularityisdiminishingmarginalreturns,
i.e.,addinganelementtoasmallsetismoretialthanaddingittoa
largeset.
2RelatedWork
Researchofteamcompositionismostimportantandrelevanttoteamrec-
ommendationwherealistofteamsarerecommended.Moreoften,teamrec-
ommendationcomesfromorganizationalandbehavioralsciencesandresearch
onsocialwebapplicationthathasappearedforateamrecommendationsince
2012.
DepartmentofCSE,GEC,Thrissur
2
3.PLAYERRECOMMENDATIONASASUBMODULARFUNCTION
OPTIMIZATION
CS451Seminar,2019
Figure2:Playerattributesandpossiblevaluesfortheattributes
3PlayerRecommendationAsASubmodular
FunctionOptimization
Here,weformulatetheplayerrecommendationintooneoptimizationproblem
andprovethesubmodularitypropertyofthisfunctionaswell.
3.1Functionforskillcoverage
GiventhePESplatform,wechoosetenplayersattributesasthemostim-
portantskillsfortheteamcomposition,i.e.attackingprowess,ballcontrol,
dribbling,lowpass,loftedpass,header,defensiveprowess,speed,
andgoalkeeping.Inaddition,weconsidertheplayersnumber,name,position,
salaryandoverallrating.Henceeachplayerhas15attributes.
Foreachplayerpi,weusestorepresenttheplayersabilitysuchasattacking
prowess,ballcontrol,andspeed.
Subsequently,wecandetheskillcoveragefunctionforasetofteam
players,T,thatisasubsetofallpotentialplayers.Wemeasuresthedegree
towhichtheabilitysjiscoveredbyatleastoneplayerinT.
DepartmentofCSE,GEC,Thrissur
3
4.ALGORITHMSFOROPTIMIZATION
CS451Seminar,2019
Figure3:FunctionofTcoveringSasF(T
3.2Recommendermodel
Weaimtoanoptimalteamthatmaximizesthecoveragevalue,alsowe
needtoconsiderthecostofcomposingtheteamofplayersforoptimization.
Sothiscanalsobeseenassolvingthebelowoptimizationproblem.
maxF(T)subjecttomodT=11andc(T)lessthatorequaltoC
wherec(T)isthesumofthesalaryofthetotalelevenplayersinTandC
isthesalaryconstraintfortheentireteam.
Figure4:Proofforsubmodular
4AlgorithmsForOptimization
HerewewillbemakinguseofGreedyAlgorithmstosolvetherecommendation
problemthatisformulatedasonesubmodularfunctionoptimizationproblem
DepartmentofCSE,GEC,Thrissur
4
4.ALGORITHMSFOROPTIMIZATION
CS451Seminar,2019
andimprovethealgorithmtosolvetheproblem.
4.1Generalizedgreedyalgorithm
Thealgorithmiterativelyselectsaplayerpsuchthattheratioofthemarginal
gainforobjectivefunctionFandcon-straintcismaximizedbyaddingp.The
bestsubsetTfoundiseventuallyreturned.
Figure5:GeneralizedGreedyAlgorithm
4.2Limitgreedyalgorithm
Figure6:LimitGreedyAlgorithm
Asinourrecommendationproblemthereareelevenplay-ersinafootball
team,thelengthofTneedstobelimited.Inaddition,c(TUp)c(T)=c(p)
DepartmentofCSE,GEC,Thrissur
5
4.ALGORITHMSFOROPTIMIZATION
CS451Seminar,2019
astheconstraintislinearanddiscrete.Henceweadaptthegeneralizedgreedy
algorithmintoLimitGreedyAlgorithm.
Ineachiteration,wewillselecttheplayerpfromasetofplayersUwiththe
largestratiooftheincreaseoftheobjectivefunctiontothewagecostunder
thecostconstraintC,untiltheteamlengthisequaltoeleven.
4.3Costeforwardselectionalgorithm
Here,wearegivenbythesubmodularcoveragefunctionF,asetofplayersU
andasalarycostconstraintC.Weusetheunitcostgreedyalgorithmto
selecttheplayerpwiththemaximumincrementoftheobjectivefunction,
whichmeansthebestplayerisaddedtotheteamT.Hence,wecanmake
themostofthecostspaceandchoosetheplayerwhoisoutstandingenoughin
theinitialselectionstage.Wewillnotselectaplayertwiceineachiteration.
Thenweenterthesecondselectionstageandusethegreedyalgorithmforthe
considerationoftheremainingcost.Bydoingthis,wehaveateamofplayers
thatmeetsthecostconstraintandcontainssutlygoodplay-ers,which
generatesbetterresultsthanthegeneralizedgreedyalgorithm
Figure7:CEFGAlgorithm
DepartmentofCSE,GEC,Thrissur
6
5.EXPERIMENTSANDREALGAMERESULTS
CS451Seminar,2019
5ExperimentsAndRealGameResults
ThealgorithmsareimplementedinMatlab2018andconductallthenumerical
computationsonaWindowsPC.Allthegamesaresimulatedinaquickgame
ofPES2018thatisdownloadedfromaplatformSteamonWindows10com-
putersystem.
5.1Analysisofdata
Forthepositionofeachplayeronthefootballpitch,weconsiderequivalence
ofpositionsandnormalizetheposi-tionasshowningivenbelow.
Figure8:Positionsofplayersandtheirequivalentnumbers
BasedonthePESgameexperience,wechoosetheteamof4-3-3formations
whichmeansthereareoneGoalkeeper,fourGuard,threeandthree
Forwardintheteam.
Forthecostconstraint,thereisnoplayerssalarydatainthewebsite.
Consideringthattheplayerssalaryisoftenpositivelycorrelatedwithhisrating,
wethewageswithscoresofsomeplayersbasedontheexistingdata.We
thatthedataisexponentiallydistributedandthereforeusetheleastsquares
methodforregression.ThecurveformulatedbelowisshowninFig.9
wheren=6.375104,andtheta=0.1029.Thenthroughthecurve,
wecanthey-axisofthecorrespondingpointbasedonthex-axis,which
meanswecangetaplayerssalarybasedonhisratings.
DepartmentofCSE,GEC,Thrissur
7
5.EXPERIMENTSANDREALGAMERESULTS
CS451Seminar,2019
Figure9:Costofplayersasafunctionoftheirratings
5.2ExperimentalResults
Weselectatotalof8,762players,forensuringthecredibilityofresults,with
theratingslargerthanorequalto60inthedatabase,andrecommendateam
including11players.WeusetheCEFGAlgorithmtosolvetheoptimization
prob-lemandsetatlylargecostasretrievedfromthecurveinFig.9
Basedontherecommendedplayers,wecomposeaDreamTeam.Toconduct
comparisonofthealgorithmper-formance,werandomlygenerateateamin
thePESwithoutanycostconstraintandthensimulatethebattlebetweenthe
twoteams(includingtheplayers)asshowninFig.10.AMIENSrepresents
theDreamTeamandDIJONrepresentstherandomteam.Theresult
fromallthevematchesis4:1andthedreamteamdominatesmostofthe
competitions.
ForverifyingtheaccuracyandstrengthoftheCEFGalgorithm,weselect
Figure10:DreamteamvsRandomteam
MAB,MSBandHERteamsinthegameallofwhichexistintherealgame-
play.Wecalculatethecostsofthethreeteams,andusethemasconstraintto
DepartmentofCSE,GEC,Thrissur
8
5.EXPERIMENTSANDREALGAMERESULTS
CS451Seminar,2019
recommendateamofplayersbasedontheCEFGalgorithm.Wethenmatch
therecommendedteamwiththeexistingthreeteamsandgivestheresultsin
theand
Figure11:MatchresultsofCEFGvsactualteams
Figure12:NormalizedresultsoftheCEFGv.s.theactualteams
Wecanthatunderthesamecostconstraint(orinasenseofrating),
theteamsrecommendedbyCEFGalgorithmarestrongerthanactualteams.
TheteamsgeneratedbytheCEFGalgorithmdominatetheplayinthefootball
pitch.
DepartmentofCSE,GEC,Thrissur
9
6.CONCLUSION
CS451Seminar,2019
6Conclusion
Wemakeanin-depthanalysisofteamcompositioninPESthatcanbecon-
vertedintoaplayerrecommenda-tionproblem.Asthereisnoclearapproach
forfootballplayerrecommendationinagame,weproposeaskillcoverage
functiontoquantifythecomplementarycapabilityofaproperteam.Wethen
improvethegreedyalgorithmtosolvetherecommendationproblem.Wecon-
ductempiricalstudyoftheproposedrecommendationtechniquesinagame
platformofPES2018.Theresultsdemonstratethestrengthoftheteamas
wellastheenessofourapproach.Althoughweinvestigateourtech-
niquesinthecontextofPES,theproposedrecommendationmodelbasedon
thesubmodularfunctionisrathergeneralandcanbeadaptedtosolveother
teamcompo-sitionproblems.Wenoticethattheplayerrecommendationtech-
niquecanalsobeusedtoimproveagameenginebysuggestingagoodteam
tocomputer-controlledcharactersinasportgame.ImprovingtheCEFGal-
gorithmisagreatchallenge.Wewillseekforabetterboundsoastoimprove
theplayerrecommendationquality.
DepartmentofCSE,GEC,Thrissur
10
